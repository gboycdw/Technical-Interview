# Network

### Summary

이제부터 정리할 내용은 네트워크 7계층구조와 연결지어 웹 통신을 할 때 어떤 일이 일어나는 지에 대한 내용이다.

### 1. 브라우저

- (7. 응용 계층)사용자가 브라우저를 실행하고 URL값을 입력한다.
- (7. 응용 계층)브라우저는 URL값을 분석하여 HTTP Request ``메시지``를 생성한다.

### 2. 프로토콜 스택과 LAN 어댑터

- (4. 전송 계층) 프로토콜 스택은 브라우저로부터 ``메시지``를 받아 패킷 속에 저장한다.
- (3. 네트워크 계층) 받은 ``메시지``를 ``segment``로 분할하고 ``패킷``에 추가 정보를 붙인다.
- (2. 데이터링크 계층) ``패킷``을 LAN 어댑터로 넘기고, 다음 ``홉(hop)``의 ``MAC Address``를 붙인 ``Frame``을 전달한다.
- (1. 물리 계층) ``frame``을 ``전기 신호``로 변환하고, LAN 케이블에 송출시킨다.

### 3. 허브, 스위치, 라우터, 프로바이더

- LAN 어댑터가 송신한 ``frame``은 스위칭 허브를 경유하여 ``라우터``에 도착한다.

  * (1. 물리 계층) 스위칭 허브는 ``전기 신호``를 받아 ``frame``을 수시한다.
  * (2. 데이터링크 계층) 스위칭 허브는 ``frame``을 받아 ``MAC Address``를 확인하고 적절한 포트로 전달한다.
  * (3. 네트워크 계층) 도착한 ``frame``의 ``IP Address``를 확인하고, 다음 홉(hop)(=``라우터``)로 ``패킷``을 전달한다.
- ``라우터``는 ``패킷``을 프로바이더에게 전달한다.

  * (2. 데이터링크 계층) ``패킷``을 ``Ethernet``과 같은 데이터링크 프로토콜을 사용하여 프로바이더에게 전달한다.
- 인터넷으로 접속한다.

  * (3. 네트워크 계층) ``패킷``은 다음 홉(hop)의 ``IP Address``를 사용하여 인터넷으로 전달된다.
  * (4. 전송 계층) ``TCP, UDP``등의 프로토콜을 사용하여 ``패킷``이 최종 목적지로 전달된다.
- ``패킷``은 인터넷 입구에 있는 액세스 회선에 의해 POP(Point of Presence, 통신사용 라우터)로 운반되고, POP을 거쳐 인터넷 핵심부로 진입, 고속 ``라우터``들 사이로 ``패킷``이 목적지를 향해 전달된다.

  * (3. 네트워크 계층) ``패킷``을 다음 홉(hop)의 ``IP Address``를 사용하여 최적 경로를 선택하여 전달한다.
  * (2. 데이터링크 계층) ``패킷``을 데이터링크 ``frame``으로 캡슐화하여 다음 라우터로 전송한다.
  * (1. 물리 계층) ``frame``을 ``전기 신호``로 변환하여 라우터 간에 전송한다.

### 4. 방화벽, 캐시서버

- ``패킷``은 인터넷 핵심부를 통과하여 웹 서버측의 LAN에 도착하고, ``방화벽``이 도착한 ``패킷``을 검사한다.

  * (4. 전송 계층) 방화벽이 ``패킷``내부를 열어 포트 번호, 연결 상태 등을 확인하고 허용 여부를 결정한다.
- ``패킷``이 웹 서버까지 가야하는 지 여부를 판단하는 캐시 서버가 존재한다.

  * (7. 응용 계층) 데이터가 캐시 서버에 있으면 웹 서버에 의뢰하지 않고 바로 값을 읽고, 또 다시 이용할 수 있는 데이터는 캐시 서버에 저장한다.

### 5. 웹 서버

- (6. 표현 계층) ``패킷``이 웹 서버에 도착하면 웹 서버의 프로토콜 스택은 ``패킷``을 추출하여 메시지를 복원하고 웹 서버 애플리케이션에 넘긴다.
- (7. 응용 계층) ``메시지``를 받은 웹 서버 애플리케이션은 요청 ``메시지``에 따른 데이터를 응답 ``메시지``에 넣어 클라이언트로 회송한다.
- (7. 응용 계층) 응답 ``메시지``가 클라이언트로 전달되고, 클라이언트에서 렌더링되어 사용자에게 제공된다.


### 네트워크..

이 내용은 네트워크 공부를 위해 작성한 문서로, 아직 이해도가 높지 않아 잘못된 정보가 포함되었을 수 있으므로 그런 내용이 발견된다면 언제든 누구든 리뷰를 달아주셔도 좋습니다. 이 문서는 공부해나가며 계속해서 보완 예정입니다.
